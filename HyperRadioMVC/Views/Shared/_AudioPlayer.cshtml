<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HLS Audio Player</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <link rel="stylesheet" href="~/css/audioplayer.css" />
</head>

<body>
<div id="audio-player">
    <audio id="audio" controls autoplay></audio>

    <div id="now-playing" class="now-playing">
        <span id="song-title">Now Playing:</span>
        <strong id="song-name">Sample Song</strong>
        <p id="artist-name">Artist name</p>
    </div>

    <div class="player-controls">
        <button id="play-btn" class="control-btn">Play</button>
        <button id="pause-btn" class="control-btn hidden">Pause</button>
    </div>

    <div class="player-volume">
        <input id="volume" type="range" min="0" max="1" step="0.1" value="1" />
    </div>
</div>



<script>
    const audio = document.getElementById('audio');
    const src = 'http://localhost:5118/api/stream/live.m3u8';

    if (Hls.isSupported()) {
        const hls = new Hls();
        hls.loadSource(src);
        hls.attachMedia(audio);
        hls.on(Hls.Events.MANIFEST_PARSED, () => {
            audio.play();
        });
    } else if (audio.canPlayType('application/vnd.apple.mpegurl')) {
        // Safari & iOS
        audio.src = src;
        audio.play();
    }
</script>
</body>
</html>