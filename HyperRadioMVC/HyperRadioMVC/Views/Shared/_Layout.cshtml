<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Hyper Radio</title>
    
    <link rel="manifest" href="~/manifest.json" />
    <link rel="icon" type="image/x-icon" href="~/favicon.svg" />
    <link rel="stylesheet" href="~/css/layout.css" asp-append-version="true" />
    
    
    <!-- ============================
     SEO + SOCIAL META TAGS
============================= -->

<!-- Basic SEO -->
<meta name="title" content="Hyper Radio — Live Shows. Stream Music. Artist-Driven Radio." />
<meta name="description" content="Hyper Radio is a creator-driven radio platform where artists host shows and listeners enjoy live HLS audio streaming with high quality 24/7." />
<meta name="keywords" content="Hyper Radio, online radio, music shows, livestream radio, artists, HLS audio streaming, digital radio platform, creator radio" />
<meta name="author" content="Hyper Radio" />

<!-- Viewport -->
<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Canonical URL -->
<link rel="canonical" href="https://hyper-radio-mvc-cbdtd3eqc3b0c7fp.norwayeast-01.azurewebsites.net/" />

<!-- Open Graph (Facebook/LinkedIn/Instagram) -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Hyper Radio — Live Shows. Stream Music." />
<meta property="og:description" content="Discover artists, explore radio shows, and listen live with high-quality HLS streaming." />
<meta property="og:url" content="https://hyper-radio-mvc-cbdtd3eqc3b0c7fp.norwayeast-01.azurewebsites.net/" />
<meta property="og:site_name" content="Hyper Radio" />
<meta property="og:image" content="https://hyper-radio-mvc-cbdtd3eqc3b0c7fp.norwayeast-01.azurewebsites.net/og-image.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />

<!-- Twitter Card (even without an account, this improves sharing) -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Hyper Radio — Live Shows. Stream Music." />
<meta name="twitter:description" content="Artist-curated radio shows and live audio streaming powered by modern HLS delivery." />
<meta name="twitter:image" content="https://hyper-radio-mvc-cbdtd3eqc3b0c7fp.norwayeast-01.azurewebsites.net/og-image.jpg" />

<!-- Theme Colors -->
<meta name="theme-color" content="#000000" />
<meta name="msapplication-navbutton-color" content="#000000" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<!-- Favicons -->
<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/manifest.json" />

<!-- PWA Friendly -->
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />

<!-- ============================
     JSON-LD Structured Data (Google)
============================= -->
<script type="application/ld+json">
{
  "name": "Hyper Radio",
  "url": "https://hyper-radio-mvc-cbdtd3eqc3b0c7fp.norwayeast-01.azurewebsites.net/",
  "logo": "https://hyper-radio-mvc-cbdtd3eqc3b0c7fp.norwayeast-01.azurewebsites.net/logo.svg",
  "description": "Hyper Radio is a creator-driven music and radio platform offering live shows, artist streams, and high-quality HLS audio."
}
</script>
</head>
<body>

<header>
    <div class="navbar">
        <a asp-controller="Home" asp-action="Index" class="ajax-link">
            <img src="/logo.svg" alt="Hyper Radio" class="logo" />
        </a>

        <button id="menu-toggle" class="menu-toggle">☰</button>

        <nav id="nav-links" class="nav-links">
            <a asp-controller="About" asp-action="Index" class="ajax-link">ABOUT</a>
            <a asp-controller="Show" asp-action="Index" class="ajax-link">CREATE A SHOW</a>
            <a asp-controller="Pitch" asp-action="Index" class="ajax-link">PITCH</a>
        </nav>
    </div>
</header>

<!-- Main Content container -->
<main id="main-content">
    @RenderBody()
</main>

<!-- Persistent Audio Player -->
<footer class="footer">
    @Html.Partial("_AudioPlayer")
</footer>
<!-- Scripts -->
<script src="~/lib/jquery/dist/jquery.min.js"></script>

<!-- Hamburger -->
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const toggle = document.getElementById("menu-toggle");
        const navLinks = document.getElementById("nav-links");
        toggle.addEventListener("click", () => navLinks.classList.toggle("show"));
    });
</script>

<!-- HLS.js -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://unpkg.com/htmx.org@1.9.10"></script>

<!-- AJAX Page Loader (updates only #main-content) -->
<script>
document.addEventListener("DOMContentLoaded", () => {
    const mainContent = document.getElementById("main-content");

    async function loadPage(url, pushState = true) {
        const res = await fetch(url, { headers: { "X-Requested-With": "XMLHttpRequest" } });
        if (!res.ok) return;

        const html = await res.text();
        const doc = new DOMParser().parseFromString(html, "text/html");

        const newContent = doc.querySelector("#main-content");
        if (!newContent) return;

        // 1️⃣ Replace content
        mainContent.innerHTML = newContent.innerHTML;

        // Re-enable HTMX triggers inside the replaced content
        if (window.htmx) {
            htmx.process(mainContent);
        }

        
        // 2️⃣ Extract all script tags
        const scripts = newContent.querySelectorAll("script");

        scripts.forEach((oldScript) => {
            const newScript = document.createElement("script");

            // Copy attributes (src, type…)
            [...oldScript.attributes].forEach(attr =>
                newScript.setAttribute(attr.name, attr.value)
            );

            // Inline script code
            if (!oldScript.src) newScript.textContent = oldScript.innerHTML;

            // 3️⃣ Run it
            document.body.appendChild(newScript);
        });

        // 4️⃣ Run page hook (optional)
        if (typeof window.onAjaxLoad === "function") {
            window.onAjaxLoad();
        }

        // 5️⃣ Update browser URL
        if (pushState) window.history.pushState({}, "", url);
    }

    // Link handling
    document.body.addEventListener("click", e => {
        const link = e.target.closest("a.ajax-link");
        if (!link) return;

        e.preventDefault();
        loadPage(link.getAttribute("href"));
    });

    // Handle back/forward buttons
    window.addEventListener("popstate", () => {
        loadPage(window.location.pathname, false);
    });
});
</script>

<!-- Audio Player Script -->

@await RenderSectionAsync("Scripts", required: false)
</body>
</html>